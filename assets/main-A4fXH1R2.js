const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/catalog-CE3CXGLu.js","assets/vendor-2fZl6onH.js","assets/vendor-BfMlxmOj.css"])))=>i.map(i=>d[i]);
import{i as E,a as U}from"./vendor-2fZl6onH.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const f="2609725f661288e9b08bc0d62455b671",h="https://api.themoviedb.org/3";async function G(){return await(await fetch(`${h}/trending/movie/day?api_key=${f}`)).json()}async function Le(){return await(await fetch(`${h}/trending/movie/week?api_key=${f}`)).json()}async function R(e){return await(await fetch(`${h}/movie/${e}?api_key=${f}`)).json()}async function Z(e){return await(await fetch(`${h}/movie/${e}/videos?api_key=${f}`)).json()}async function Ee(e,n=""){return await(await fetch(`${h}/search/movie?api_key=${f}&query=${encodeURIComponent(e)}&year=${n}`)).json()}async function j(){return(await axios.get(`${h}/genre/movie/list`,{params:{api_key:f,language:LANGUAGE}})).data}async function ee(e,n){let o=document.querySelector("#popup-template");if(!o){const t=window.location.hostname==="localhost",r=t?"":window.location.pathname.split("/")[1],s=t?"/library-popup.html":`/${r}/library-popup.html`;try{const i=await fetch(s);if(!i.ok){console.error(`Popup.html yüklenemedi. Durum: ${i.status}, URL: ${i.url}`);return}const d=await i.text(),c=document.createElement("div");c.innerHTML=d;const l=c.querySelector(".movie-popup-overlay");if(!l){console.error("movie-popup-overlay bulunamadı.");return}l.id="popup-template",document.body.appendChild(l),await B(l,e,n)}catch(i){console.error("Popup yüklenirken bir hata oluştu:",i)}return}const a=o.cloneNode(!0);a.id="",await B(a,e,n)}async function B(e,n,o){e.style.display="flex";const a=e.querySelector(".movie-popup-img");a.src=n.poster_path?`https://image.tmdb.org/t/p/original${n.poster_path}`:"",a.alt=n.title,e.querySelector(".movie-popup-title").textContent=n.title,e.querySelector(".vote-avg").textContent=n.vote_average?.toFixed(1)??"-",e.querySelector(".vote-count").textContent=n.vote_count??"-",e.querySelector(".popularity-value").textContent=n.popularity?.toFixed(1)??"-";let t="-";n.genre_names?.length?t=n.genre_names.join(", "):n.genres?.length?t=n.genres.map(l=>l.name).join(", "):n.genre_ids?.length&&(t=n.genre_ids.map(l=>o[l]||l).join(", ")),e.querySelector(".genre-value").textContent=t,e.querySelector(".about-value").textContent=n.overview||"No description.";const r=e.querySelector(".movie-popup-add-btn.removed");r&&(r.style.display="inline-block",r.onclick=()=>{let l=JSON.parse(localStorage.getItem("library"))||[];l=l.filter(u=>u!==n.id),localStorage.setItem("library",JSON.stringify(l)),_(),window.location.reload()});const s=e.querySelector(".movie-popup-close"),i=window.location.hostname==="localhost",d=i?"":window.location.pathname.split("/")[1],c=i?"":`/${d}`;s.addEventListener("mouseenter",()=>{s.querySelector("img").src=`${c}/img/svg/close-hover.svg`}),s.addEventListener("mouseleave",()=>{s.querySelector("img").src=`${c}/img/svg/close.svg`}),s.addEventListener("click",()=>_()),e.addEventListener("mousedown",l=>{l.target===e&&_()}),document.body.appendChild(e)}function _(){const e=document.querySelector(".movie-popup-overlay")||document.querySelector("#popup-template");e&&e.remove()}const L=document.getElementById("library-film-list"),S=document.getElementById("library-placeholder"),O=document.querySelector(".library-custom-select"),k=document.querySelector(".library-selected-option"),m=document.querySelector(".library-genre-options"),I=document.getElementById("load-more-btn"),$=document.getElementById("library-loading");let v=null,y=[],b=0;const te=9;function F(){O.style.visibility="visible"}function J(){O.style.visibility="hidden"}async function ne(){if(v)return v;const e=await j();return v={},e.genres&&Array.isArray(e.genres)&&e.genres.forEach(n=>{v[n.id]=n.name}),v}async function oe(){Y(),J(),m.classList.add("hidden");const e=JSON.parse(localStorage.getItem("library"))||[];if(e.length===0){S.style.display="flex",L.innerHTML="",M();return}S.style.display="none",L.innerHTML="",v=await ne(),y=[];const n=new Set;for(const o of e)try{const a=await R(o);y.push(a),a.genres?.length?a.genres.forEach(t=>n.add(t.id)):a.genre_ids?.length&&a.genre_ids.forEach(t=>n.add(t))}catch(a){console.error(`Film ${o} getirilemedi`,a)}await V([...n],""),b=0,N(),C(),F(),M()}async function V(e,n=""){try{const a=(await j()).genres;if(m.innerHTML="",n){const t=document.createElement("li");t.textContent="Genre",t.dataset.id="",t.addEventListener("click",()=>{k.childNodes[0].nodeValue="Genre",m.classList.add("hidden"),T("")}),m.appendChild(t)}a.forEach(t=>{if(e.includes(t.id)&&t.id!==Number(n)){const r=document.createElement("li");r.textContent=t.name,r.dataset.id=t.id,r.addEventListener("click",()=>{k.childNodes[0].nodeValue=t.name,m.classList.add("hidden"),T(t.id)}),m.appendChild(r)}})}catch(o){console.error("Kategoriler alınamadı:",o)}}async function T(e){Y(),J(),m.classList.add("hidden");const n=JSON.parse(localStorage.getItem("library"))||[];if(n.length===0){S.style.display="flex",L.innerHTML="",M();return}S.style.display="none",L.innerHTML="",y=[];const o=Number(e);for(const t of n)try{const r=await R(t),s=r.genres?.map(i=>i.id)||r.genre_ids||[];(!e||s.includes(o))&&y.push(r)}catch(r){console.error(`Film ${t} getirilemedi`,r)}b=0,N(),C(),y.length===0&&(S.style.display="flex");const a=new Set;y.forEach(t=>{t.genres?.length?t.genres.forEach(r=>a.add(r.id)):t.genre_ids?.length&&t.genre_ids.forEach(r=>a.add(r))}),await V([...a],o),F(),M()}function N(){const e=b+te;y.slice(b,e).forEach(o=>{const a=re(o,v);L.appendChild(a)}),b=e}function C(){I&&(I.style.display=b>=y.length?"none":"block")}function re(e,n){const o=document.createElement("li");o.classList.add("library-item");const a=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://via.placeholder.com/300x450?text=No+Image",t=e.release_date?.split("-")[0]||"Bilinmiyor",r=e.vote_average||0,s=e.genres?.map(d=>d.name).join(", ")||"Tür bilinmiyor",i=ae(r);return o.innerHTML=`
    <img src="${a}" alt="${e.title}" class="library-film-poster" />
    <div class="library-overlay">
      <h3 class="library-film-title">${e.title}</h3>
      <div class="library-bottom-row">
        <p class="library-film-info">${s} | ${t}</p>
        <div class="library-stars">${i}</div>
      </div>
    </div>
  `,o.addEventListener("click",()=>{ee(e,n)}),o}const q={full:"./img/svg/star.svg",half:"./img/svg/star-half.svg",empty:"./img/svg/star-outline.svg"};function ae(e){const n=Math.floor(e/2),o=e%2>=1?1:0,a=5-n-o;return`<img class="star-icon full" src="${q.full}" alt="star" />`.repeat(n)+`<img class="star-icon half" src="${q.half}" alt="half star" />`.repeat(o)+`<img class="star-icon empty" src="${q.empty}" alt="empty star" />`.repeat(a)}function Y(){$&&($.style.display="block")}function M(){$&&($.style.display="none")}document.addEventListener("DOMContentLoaded",()=>{k.childNodes[0].nodeValue="Genre",oe();const e=document.getElementById("go-to-catalog");e&&e.addEventListener("click",()=>{window.location.href="catalog.html"}),k.addEventListener("click",()=>{m.classList.toggle("hidden")}),I.addEventListener("click",()=>{N(),C()}),document.addEventListener("click",n=>{n.target.closest(".library-custom-select")||m.classList.add("hidden")})});async function ie(){const e=document.querySelector(".library-hero-bg");if(e)try{const o=(await G())?.results;if(!o||o.length===0)return;const t=o[Math.floor(Math.random()*o.length)]?.backdrop_path;if(t){const r=`https://image.tmdb.org/t/p/w1920${t}`;e.style.backgroundImage=`url('${r}')`,e.style.backgroundSize="cover",e.style.backgroundPosition="center"}}catch(n){console.error("Hero görseli yüklenemedi:",n)}}ie();const se="modulepreload",ce=function(e){return"/CineScript-Team/"+e},D={},le=function(n,o,a){let t=Promise.resolve();if(o&&o.length>0){let d=function(c){return Promise.all(c.map(l=>Promise.resolve(l).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=s?.nonce||s?.getAttribute("nonce");t=d(o.map(c=>{if(c=ce(c),c in D)return;D[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const g=document.createElement("link");if(g.rel=l?"stylesheet":se,l||(g.as="script"),g.crossOrigin="",g.href=c,i&&g.setAttribute("nonce",i),document.head.appendChild(g),l)return new Promise((X,Q)=>{g.addEventListener("load",X),g.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return t.then(s=>{for(const i of s||[])i.status==="rejected"&&r(i.reason);return n().catch(r)})},K="en-US";let de=1,w=[];function A(e){return Math.round(e*10)/10}function ue(e){return(JSON.parse(localStorage.getItem("myLibrary"))||[]).some(o=>o.id===e)}function me(e,n){let o=JSON.parse(localStorage.getItem("myLibrary"))||[];o.find(t=>t.id===e.id)?(o=o.filter(t=>t.id!==e.id),n.textContent="Add to my library",E.info({message:"Removed from My Library",position:"topRight"})):(o.push(e),n.textContent="Remove from my library",E.success({message:"Added to My Library",position:"topRight"})),localStorage.setItem("myLibrary",JSON.stringify(o))}async function pe(e=1){const n=new Date,o=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),t=new Date(o,n.getMonth()+1,0).getDate(),r=`${o}-${a}-01`,s=`${o}-${a}-${t}`;return(await U.get(`${h}/discover/movie`,{params:{api_key:f,language:K,sort_by:"popularity.desc",primary_release_date_gte:r,primary_release_date_lte:s,page:e}})).data}async function ge(){return(await U.get(`${h}/genre/movie/list`,{params:{api_key:f,language:K}})).data}function ye(e,n){const o=new Date(e.release_date).toLocaleDateString("en-GB");return`
    <div class="container">
      <h3 class="upcoming-header">Upcoming this month</h3>
      <div class="upcoming-body">
        <img
          class="upcoming-img"
          src="https://image.tmdb.org/t/p/original${e.backdrop_path}"
          alt="${e.title}"
        />
        <div class="upcoming-content">
          <h2 class="upcoming-content-header">${e.title}</h2>
          <div class="result">
            <div class="result-left">
              <div>
                <span>Release date</span>
                <span class="date">${o}</span>
              </div>
              <div>
                <span>Vote / Votes</span>
                <span class="vote">
                  <span class="vote-average">${A(e.vote_average)}</span> /
                  <span class="vote-count">${e.vote_count}</span>
                </span>
              </div>
            </div>
            <div class="result-right">
              <div>
                <span>Popularity</span>
                <span class="popularity">${A(e.popularity)}</span>
              </div>
              <div>
                <span>Genre</span>
                <span class="genre">${n}</span>
              </div>
            </div>
          </div>
          <h3 class="upcoming-about-header">About</h3>
          <p class="upcoming-about">${e.overview}</p>
          <button class="btn-primary" id="library-btn">Add to my library</button>
        </div>
      </div>
    </div>
  `}async function W(){console.log("🚀 renderUpcoming çağrıldı");const e=document.getElementById("upcoming");try{w.length===0&&(w=(await pe(de++)).results.filter(d=>d.backdrop_path&&d.overview));const n=await ge(),o={};n.genres.forEach(i=>o[i.id]=i.name);const a=JSON.parse(localStorage.getItem("myLibrary"))||[];let t;for(;w.length>0;){const i=Math.floor(Math.random()*w.length),d=w.splice(i,1)[0];if(!a.some(c=>c.id===d.id)){t=d;break}}if(!t){e.innerHTML='<p style="text-align:center">No more upcoming movies available.</p>',E.warning({message:"No more unique movies to show.",position:"topRight"});return}const r=t.genre_ids.map(i=>o[i]).filter(Boolean).join(", ");e.innerHTML=ye(t,r);const s=e.querySelector("#library-btn");ue(t.id)&&(s.textContent="Remove from my library"),s.addEventListener("click",()=>me(t,s))}catch(n){console.error("Error loading upcoming movie:",n),E.error({message:"Failed to load upcoming movie",position:"topRight"})}}const p=document.createElement("div");p.classList.add("trailer-modal","is-hidden");p.innerHTML=`
  <div class="trailer-modal-backdrop">
    <div class="trailer-modal-content">
      <button class="trailer-modal-close">&times;</button>
      <iframe
        id="trailer-video"
        width="100%"
        height="100%"
        frameborder="0"
        allowfullscreen
        allow="autoplay; encrypted-media"
      ></iframe>
    </div>
  </div>
`;document.body.appendChild(p);const fe=p.querySelector(".trailer-modal-close"),H=p.querySelector(".trailer-modal-backdrop"),z=p.querySelector("#trailer-video");function he(e){z.src=`https://www.youtube.com/embed/${e}?autoplay=1`,p.classList.remove("is-hidden")}function P(){p.classList.add("is-hidden"),z.src=""}fe.addEventListener("click",P);H.addEventListener("click",e=>{e.target===H&&P()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!p.classList.contains("is-hidden")&&P()});let x=null;function ve(){const e=document.querySelector(".catalog-hero-title"),n=document.querySelector(".catalog-hero-overview"),o=document.querySelector(".catalog-hero-btn.trailer"),a=document.querySelector(".catalog-hero-btn.details"),t=document.querySelector(".catalog-hero");if(!t||!e||!n){console.warn("Catalog Hero için gerekli DOM öğeleri bulunamadı.");return}async function r(){try{const d=(await G()).results,c=d[Math.floor(Math.random()*d.length)];x=c.id;const u=`https://image.tmdb.org/t/p/original${c.backdrop_path||c.poster_path}`;t.style.backgroundImage=`url(${u})`,e.textContent=c.title||c.name||"Untitled",n.textContent=c.overview||"No description available"}catch(i){console.error("Error loading hero section:",i)}}async function s(){if(x)try{const c=(await Z(x)).results.find(l=>l.type==="Trailer"&&l.site==="YouTube");c?he(c.key):alert("No trailer available.")}catch(i){console.error("Trailer error:",i)}}o&&o.addEventListener("click",s),a&&a.addEventListener("click",()=>{alert("More details tıklanıldı!")}),r()}function be(){const e=document.querySelector("#open-team-modal"),n=document.querySelector(".modal-overlay"),o=document.querySelector(".modal-close"),a=document.querySelector(".slider-track"),t=document.querySelector(".slider-btn.prev"),r=document.querySelector(".slider-btn.next"),s=document.querySelectorAll(".team-card");if(!e||!n||!o){console.warn("Footer modal için gerekli öğeler bulunamadı.");return}let i=0;function d(){const u=-i*100;a&&(a.style.transform=`translateX(${u}%)`)}function c(){n.classList.add("active"),o.focus(),document.body.style.overflow="hidden",d()}function l(){n.classList.remove("active"),e.focus(),document.body.style.overflow=""}e.addEventListener("click",u=>{u.preventDefault(),c()}),o.addEventListener("click",l),window.addEventListener("click",u=>{u.target===n&&l()}),document.addEventListener("keydown",u=>{u.key==="Escape"&&l()}),t&&r&&s.length>0&&(t.addEventListener("click",()=>{i=(i-1+s.length)%s.length,d()}),r.addEventListener("click",()=>{i=(i+1)%s.length,d()}))}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("upcoming")&&W()});async function we(){const e=document.querySelectorAll("load");for(const n of e){const o=n.getAttribute("src");if(o)try{const a=await fetch(o);if(a.ok){const t=await a.text(),r=document.createElement("div");r.innerHTML=t,n.replaceWith(r)}else console.error("Partial yüklenemedi:",o)}catch(a){console.error("Yükleme hatası:",a)}}}we().then(async()=>{try{if(document.querySelector(".catalog-hero")&&ve(),document.getElementById("catalog")){const{initCatalog:t}=await le(async()=>{const{initCatalog:r}=await import("./catalog-CE3CXGLu.js");return{initCatalog:r}},__vite__mapDeps([0,1,2]));typeof t=="function"&&t()}document.getElementById("upcoming")&&W(),document.getElementById("footer")&&be()}catch(e){console.error("Bölümler başlatılırken hata oluştu:",e)}});export{Le as a,j as f,Ee as s};
//# sourceMappingURL=main-A4fXH1R2.js.map
