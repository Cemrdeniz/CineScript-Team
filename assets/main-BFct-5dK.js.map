{"version":3,"file":"main-BFct-5dK.js","sources":["../../src/js/upcoming.js","../../src/js/library-hero.js","../../src/js/scroll-up.js","../../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport { fetchUpcomingMovies, fetchGenres } from '../api/tmdbApi';\nlet currentPage = 1;\nlet cachedUpcoming = [];\nfunction round(value) {\n  return Math.round(value * 10) / 10;\n}\nfunction isInLibrary(id) {\n  const lib = JSON.parse(localStorage.getItem('myLibrary')) || [];\n  return lib.some(movie => movie.id === id);\n}\nfunction toggleLibrary(movie, btn) {\n  let lib = JSON.parse(localStorage.getItem('myLibrary')) || [];\n  const exists = lib.find(m => m.id === movie.id);\n  if (exists) {\n    lib = lib.filter(m => m.id !== movie.id);\n    btn.textContent = 'Add to my library';\n    iziToast.info({ message: 'Removed from My Library', position: 'topRight' });\n  } else {\n    lib.push(movie);\n    btn.textContent = 'Remove from my library';\n    iziToast.success({ message: 'Added to My Library', position: 'topRight' });\n  }\n  localStorage.setItem('myLibrary', JSON.stringify(lib));\n}\nfunction buildHTML(movie, genreNames) {\n  const releaseDate = new Date(movie.release_date).toLocaleDateString();\n  return `\n    <div class=\"container\">\n      <h3 class=\"upcoming-header\">Upcoming this month</h3>\n      <div class=\"upcoming-body\">\n        <img\n          class=\"upcoming-img\"\n          src=\"https://image.tmdb.org/t/p/original${movie.backdrop_path}\"\n          alt=\"${movie.title}\"\n        />\n        <div class=\"upcoming-content\">\n          <h2 class=\"upcoming-content-header\">${movie.title}</h2>\n          <div class=\"result\">\n            <div class=\"result-left\">\n              <div>\n                <span>Release date</span>\n                <span class=\"date\">${releaseDate}</span>\n              </div>\n              <div>\n                <span>Vote / Votes</span>\n                <span class=\"vote\">\n                  <span class=\"vote-average\">${round(\n                    movie.vote_average\n                  )}</span> /\n                  <span class=\"vote-count\">${movie.vote_count}</span>\n                </span>\n              </div>\n            </div>\n            <div class=\"result-right\">\n              <div>\n                <span>Popularity</span>\n                <span class=\"popularity\">${round(movie.popularity)}</span>\n              </div>\n              <div>\n                <span>Genre</span>\n                <span class=\"genre\">${genreNames}</span>\n              </div>\n            </div>\n          </div>\n          <h3 class=\"upcoming-about-header\">About</h3>\n          <p class=\"upcoming-about\">${movie.overview}</p>\n          <button class=\"btn-primary\" id=\"library-btn\">Add to my library</button>\n        </div>\n      </div>\n    </div>\n  `;\n}\nexport async function renderUpcoming() {\n  const section = document.getElementById('upcoming');\n  try {\n    // Film önbelleği boşsa yeni sayfa al\n    if (cachedUpcoming.length === 0) {\n      const data = await fetchUpcomingMovies(currentPage++);\n      cachedUpcoming = data.results.filter(m => m.backdrop_path && m.overview);\n    }\n    const genresData = await fetchGenres();\n    const genresMap = {};\n    genresData.genres.forEach(g => (genresMap[g.id] = g.name));\n    const library = JSON.parse(localStorage.getItem('myLibrary')) || [];\n    // Kütüphanede olmayan film bul\n    let movie;\n    while (cachedUpcoming.length > 0) {\n      const index = Math.floor(Math.random() * cachedUpcoming.length);\n      const candidate = cachedUpcoming.splice(index, 1)[0];\n      if (!library.some(f => f.id === candidate.id)) {\n        movie = candidate;\n        break;\n      }\n    }\n    if (!movie) {\n      section.innerHTML = `<p style=\"text-align:center\">No more upcoming movies available.</p>`;\n      iziToast.warning({\n        message: 'No more unique movies to show.',\n        position: 'topRight',\n      });\n      return;\n    }\n    const genreNames = movie.genre_ids.map(id => genresMap[id]).join(', ');\n    section.innerHTML = buildHTML(movie, genreNames);\n    const btn = document.getElementById('library-btn');\n    if (isInLibrary(movie.id)) btn.textContent = 'Remove from my library';\n    btn.addEventListener('click', () => toggleLibrary(movie, btn));\n  } catch (error) {\n    console.error('Error loading upcoming movie:', error);\n    iziToast.error({\n      message: 'Failed to load upcoming movie',\n      position: 'topRight',\n    });\n  }\n}\n","import { fetchDailyTrending } from '../api/tmdbApi.js';\n\nasync function setHeroBackground() {\n  const heroElement = document.querySelector('.library-hero-bg');\n  if (!heroElement) return;\n\n  try {\n    const data = await fetchDailyTrending();\n    const results = data?.results;\n\n    if (!results || results.length === 0) return;\n\n    // Rastgele bir film seç\n    const randomMovie = results[Math.floor(Math.random() * results.length)];\n    const backdropPath = randomMovie?.backdrop_path;\n\n    if (backdropPath) {\n      const imageUrl = `https://image.tmdb.org/t/p/w1920${backdropPath}`;\n      heroElement.style.backgroundImage = `url('${imageUrl}')`;\n      heroElement.style.backgroundSize = 'cover';\n      heroElement.style.backgroundPosition = 'center';\n    }\n  } catch (error) {\n    console.error('Hero görseli yüklenemedi:', error);\n    // CSS fallback devrede kalır\n  }\n}\n\nsetHeroBackground();\n","const scrollUpBtn = document.querySelector('#scrollUpBtn');\n\nconst scrollThreshold = 300;\n\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\nfunction scrollFunction() {\n  if (\n    document.body.scrollTop > scrollThreshold ||\n    document.documentElement.scrollTop > scrollThreshold\n  ) {\n    scrollUpBtn.style.display = 'block';\n  } else {\n    scrollUpBtn.style.display = 'none';\n  }\n}\n\nscrollUpBtn.addEventListener('click', function () {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n","import { renderUpcoming } from './js/upcoming.js';\nimport './js/header.js';\nimport './js/hero.js';\nimport './js/catalog-hero.js';\nimport './js/library-hero.js';\nimport './js/trends.js';\n// import './js/upcoming.js';\nimport './js/catalog.js';\nimport './js/library.js';\nimport './js/footer.js';\nimport './js/popup.js';\nimport './js/loader.js';\nimport './js/scroll-up.js';\nimport './api/tmdbApi.js';\nimport 'izitoast/dist/css/iziToast.min.css';\ndocument.addEventListener('DOMContentLoaded', () => {\n  const upcomingSection = document.getElementById('upcoming');\n  if (upcomingSection) {\n    renderUpcoming();\n  }\n});\nimport { initCatalog } from './js/catalog.js';\nimport { createMoviePopup } from './js/popup.js';\nimport { showLoader, hideLoader } from './js/loader.js';\n\nimport './js/library.js';\nasync function loadPartials() {\n  const loads = document.querySelectorAll('load');\n  for (const el of loads) {\n    const src = el.getAttribute('src');\n    if (src) {\n      const res = await fetch(src);\n      if (res.ok) {\n        const html = await res.text();\n        const wrapper = document.createElement('div');\n        wrapper.innerHTML = html;\n        el.replaceWith(wrapper);\n      } else {\n        console.error('Partial yüklenemedi:', src);\n      }\n    }\n  }\n}\nloadPartials().then(() => {});\n"],"names":["currentPage","cachedUpcoming","round","value","isInLibrary","id","movie","toggleLibrary","btn","lib","m","iziToast","buildHTML","genreNames","releaseDate","renderUpcoming","section","fetchUpcomingMovies","genresData","fetchGenres","genresMap","g","library","index","candidate","f","error","setHeroBackground","heroElement","results","fetchDailyTrending","backdropPath","imageUrl","scrollUpBtn","scrollThreshold","scrollFunction","loadPartials","loads","el","src","res","html","wrapper"],"mappings":"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"}